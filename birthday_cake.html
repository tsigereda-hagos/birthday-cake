<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday!</title>
    <style>
          body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f8b6d2 0%, #f6e7fa 100%);
            font-family: "Segoe UI", sans-serif;
          }
          h1 {
            color: #d72660;
            margin-bottom: 0.5em;
            text-shadow: 1px 2px 8px #fff;
          }
          .cake {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 30px 0;
          }
          .cake-base {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 80px;
            background: #f7c873;
            border-radius: 0 0 90px 90px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            border: 3px solid #e2a03f;
          }
          .cake-layer {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 160px;
            height: 60px;
            background: #fff0f5;
            border-radius: 0 0 80px 80px;
            border: 3px solid #e2a03f;
            z-index: 2;
          }
          .cake-icing {
            position: absolute;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%);
            width: 170px;
            height: 30px;
            background: #f8b6d2;
            border-radius: 80px 80px 40px 40px;
            z-index: 3;
            box-shadow: 0 2px 8px #fff6fa inset;
          }
          .candle {
            position: absolute;
            left: 50%;
            top: 30px;
            width: 16px;
            height: 50px;
            background: repeating-linear-gradient(
              135deg,
              #fff 0 6px,
              #d72660 6px 12px
            );
            border-radius: 8px;
            transform: translateX(-50%);
            z-index: 4;
            box-shadow: 0 2px 6px #e2a03f33;
          }
          .flame {
            position: absolute;
            left: 50%;
            top: 12px;
            width: 18px;
            height: 28px;
            background: radial-gradient(
              ellipse at center,
              #ffe066 60%,
              #ffb347 100%
            );
            border-radius: 50% 50% 60% 60%;
            transform: translateX(-50%) scaleY(1);
            opacity: 1;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 5;
            box-shadow: 0 0 18px 6px #ffe06699;
            cursor: pointer;
            animation: flicker 1s infinite alternate;
          }
          @keyframes flicker {
            0% {
              transform: translateX(-50%) scaleY(1) scaleX(1);
              opacity: 1;
            }
            50% {
              transform: translateX(-50%) scaleY(1.1) scaleX(0.95);
              opacity: 0.95;
            }
            100% {
              transform: translateX(-50%) scaleY(1) scaleX(1.05);
              opacity: 1;
            }
          }
          .flame.off {
            opacity: 0;
            animation: none;
            pointer-events: none;
          }
          .wish {
      position: static;
      margin: 2em auto 0 auto;
      transform: none;
            font-size: 1.2em;
            color: #7c3f58;
            background: #fff;
            border: 2px solid #f8b6d2;
            background: linear-gradient(90deg, #fff6fa 60%, #ffe06622 100%);
            padding: 1.5em 2em;
            border-radius: 24px;
            box-shadow: 0 8px 32px #d7266022, 0 0 0 4px #f8b6d233;
            display: block !important;
            max-width: 90vw;
            text-align: center;
            font-family: 'Segoe Script', 'Comic Sans MS', cursive, sans-serif;
      z-index: 2;
          }
          .wish-title {
            font-size: 1.4em;
            color: #d72660;
            margin-bottom: 0.5em;
            font-weight: bold;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px #fff0f5, 0 1px 2px #d7266040;
          }
          .wish-message {
            font-size: 1.15em;
            color: #7c3f58;
          }
          .sparkle {
            font-size: 1.2em;
            color: #ffe066;
            text-shadow: 0 0 8px #ffe06699;
          }
          }
          .show {
            display: block !important;
            animation: fadeIn 1s;
          }
          @keyframes fadeIn {
            from {
              opacity: 0;
            }
            to {
              opacity: 1;
            }
          }
          @media (max-width: 500px) {
            .cake {
              width: 150px;
              height: 150px;
            }
            .cake-base {
              width: 120px;
              height: 50px;
            }
            .cake-layer {
              width: 100px;
              height: 35px;
              bottom: 35px;
            }
            .cake-icing {
              width: 110px;
              height: 18px;
              bottom: 65px;
            }
            .candle {
              width: 10px;
              height: 30px;
              top: 15px;
            }
            .flame {
              width: 12px;
              height: 18px;
              top: 2px;
            }
          }
    </style>
  </head>
  <body>
    <h1>Happy Birthday, <span id="friendName">Fafiye</span>! üéÇ</h1>
    <div class="subtitle">
  Wishing you the sweetest day<span id="friendName2"></span>!
    </div>
    <div class="confetti" id="confetti"></div>
    <button id="testConfetti" class="love-btn">
      <span class="love-heart">‚ù§Ô∏è</span> Love you!
      <span class="love-heart">‚ù§Ô∏è</span>
    </button>
    <style>
      .love-btn {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 200;
        background: linear-gradient(90deg, #ffb6b9 0%, #f8b6d2 100%);
        color: #d72660;
        border: none;
        border-radius: 32px;
        padding: 0.7em 1.6em;
        font-size: 1.15em;
        font-family: "Segoe Script", "Comic Sans MS", cursive, sans-serif;
        font-weight: bold;
        box-shadow: 0 4px 18px #d7266040, 0 1.5px 0 #fff inset;
        cursor: pointer;
        transition: transform 0.12s, box-shadow 0.12s;
        outline: none;
        display: flex;
        align-items: center;
        gap: 0.5em;
      }
      .love-btn:hover {
        transform: scale(1.07) rotate(-2deg);
        box-shadow: 0 8px 24px #d7266070, 0 1.5px 0 #fff inset;
        background: linear-gradient(90deg, #f8b6d2 0%, #ffb6b9 100%);
      }
      .love-heart {
        font-size: 1.2em;
        filter: drop-shadow(0 0 6px #fff0f5);
        animation: love-pulse 1.2s infinite alternate;
      }
      @keyframes love-pulse {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.18);
        }
      }
    </style>
    <canvas
      id="fireworks"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 101;
        display: none;
      "
    ></canvas>
    <div class="cake">
      <div class="cake-base"></div>
      <div class="cake-layer"></div>
      <div class="cake-icing"></div>
      <div class="candle"></div>
      <div class="flame" id="flame" title="Blow out the candle!"></div>
    </div>
    <button
      id="relightBtn"
      style="
        display: none;
        margin: 1.2em auto 0 auto;
        background: #fff0f5;
        color: #d72660;
        border: none;
        border-radius: 18px;
        padding: 0.6em 1.6em;
        font-size: 1.1em;
        box-shadow: 0 2px 8px #d7266022;
        cursor: pointer;
        z-index: 10;
        display: block;
      "
    >
      Relight Candle üî•
    </button>
    </div>
    <div class="wish" id="wish">
      <div class="wish-title">üéà Make a wish! üéà</div>
      <div class="wish-message">
        <span class="sparkle">‚ú®</span> May your year be filled with joy,<br />
        laughter, and may all your dreams come true!<br />
        Keep shining and smiling always, Fafiye!
        <span class="sparkle">üíñ</span>
      </div>
    </div>
    <script>
      // Add confetti keyframes if not present
      if (!document.getElementById("confetti-keyframes")) {
        const styleSheet = document.createElement("style");
        styleSheet.id = "confetti-keyframes";
        styleSheet.innerHTML = `@keyframes confetti-fall {
          to {
            transform: translateY(90vh) rotate(360deg);
            opacity: 0.7;
          }
        }`;
        document.head.appendChild(styleSheet);
      }

      // Fireworks animation
      function launchFireworks() {
        const canvas = document.getElementById("fireworks");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        canvas.style.display = "block";
        let particles = [];
        function randomColor() {
          const colors = [
            "#ffe066",
            "#d72660",
            "#7c3f58",
            "#f8b6d2",
            "#f7c873",
            "#fff0f5",
          ];
          return colors[Math.floor(Math.random() * colors.length)];
        }
        function createFirework() {
          const x = Math.random() * canvas.width * 0.8 + canvas.width * 0.1;
          const y = Math.random() * canvas.height * 0.3 + canvas.height * 0.1;
          const count = 32 + Math.floor(Math.random() * 12);
          for (let i = 0; i < count; i++) {
            const angle = (Math.PI * 2 * i) / count;
            const speed = 2 + Math.random() * 2.5;
            particles.push({
              x,
              y,
              vx: Math.cos(angle) * speed,
              vy: Math.sin(angle) * speed,
              alpha: 1,
              color: randomColor(),
              size: 2 + Math.random() * 2,
            });
          }
        }
        let frame = 0;
        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          particles.forEach((p) => {
            ctx.globalAlpha = p.alpha;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.shadowColor = p.color;
            ctx.shadowBlur = 12;
            ctx.fill();
            ctx.shadowBlur = 0;
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.04;
            p.alpha -= 0.012 + Math.random() * 0.008;
          });
          particles = particles.filter((p) => p.alpha > 0.05);
          if (frame % 18 === 0 && frame < 60) createFirework();
          frame++;
          if (frame < 120 || particles.length > 0) {
            requestAnimationFrame(animate);
          } else {
            canvas.style.display = "none";
          }
        }
        animate();
      }
      const flame = document.getElementById("flame");
      const wish = document.getElementById("wish");
      const relightBtn = document.getElementById("relightBtn");
      let blown = false;
      function blowOut() {
        if (!blown) {
          flame.classList.add("off");
          wish.classList.add("show");
          launchConfetti();
          launchFireworks();
          blown = true;
          setTimeout(() => {
            relightBtn.style.display = "block";
          }, 1200);
        }
      }
      function relight() {
        flame.classList.remove("off");
        wish.classList.remove("show");
        relightBtn.style.display = "none";
        blown = false;
      }
      flame.addEventListener("click", blowOut);
      // Allow blowing out with a long press (for mobile)
      let pressTimer;
      flame.addEventListener("touchstart", function (e) {
        pressTimer = setTimeout(blowOut, 600);
      });
      flame.addEventListener("touchend", function (e) {
        clearTimeout(pressTimer);
      });
      relightBtn.addEventListener("click", relight);
    </script>
  </body>
</html>
